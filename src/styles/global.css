/* src/styles/global.css
   Theme system: <html data-theme="dark|light|contrast">
   Default (no attribute) = dark tokens from :root
*/

/* ------------------------------------------------------------
   1) Base tokens (default = dark)
   ------------------------------------------------------------ */
:root {
  /* Core */
  --bg: #0b1020;
  --fg: #e8eefc;
  --muted: rgba(232, 238, 252, 0.75);

  /* Surfaces */
  --panel: rgba(14, 20, 42, 0.92);
  --panel-2: rgba(18, 26, 51, 0.75);

  /* Lines & shadows */
  --border: rgba(43, 55, 99, 0.9);
  --shadow: rgba(0, 0, 0, 0.35);

  /* Buttons */
  --btn: rgba(26, 36, 71, 0.95);
  --btn-hover: rgba(34, 48, 106, 0.95);

  /* Danger */
  --danger-border: rgba(255, 90, 90, 0.55);
  --danger-bg: rgba(255, 90, 90, 0.12);
  --danger-fg: rgba(255, 140, 140, 0.95);

  /* Focus ring */
  --focus: rgba(120, 170, 255, 0.95);
  --focus-shadow: rgba(120, 170, 255, 0.35);

  /* Typography */
  --font: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;

  /* Motion */
  --motion: 1;
}

/* Optional: be explicit if themeStore sets data-theme="dark" */
html[data-theme="dark"] {
  /* no overrides needed; :root already is dark */
}

/* ------------------------------------------------------------
   2) Light theme tokens
   Apply by setting: <html data-theme="light">
   ------------------------------------------------------------ */
html[data-theme="light"] {
  --bg: #f6f8ff;
  --fg: #0f172a;
  --muted: rgba(15, 23, 42, 0.72);

  --panel: rgba(255, 255, 255, 0.92);
  --panel-2: rgba(248, 250, 255, 0.95);

  --border: rgba(15, 23, 42, 0.16);
  --shadow: rgba(15, 23, 42, 0.12);

  --btn: rgba(15, 23, 42, 0.06);
  --btn-hover: rgba(15, 23, 42, 0.10);

  --danger-border: rgba(220, 38, 38, 0.32);
  --danger-bg: rgba(220, 38, 38, 0.08);
  --danger-fg: rgba(185, 28, 28, 0.95);

  --focus: rgba(37, 99, 235, 0.95);
  --focus-shadow: rgba(37, 99, 235, 0.22);
}

/* ------------------------------------------------------------
   3) High-contrast theme tokens
   Apply by setting: <html data-theme="contrast">
   ------------------------------------------------------------ */
html[data-theme="contrast"] {
  --bg: #000000;
  --fg: #ffffff;
  --muted: rgba(255, 255, 255, 0.85);

  --panel: #000000;
  --panel-2: #0b0b0b;

  --border: rgba(255, 255, 255, 0.85);
  --shadow: rgba(255, 255, 255, 0.12);

  --btn: rgba(255, 255, 255, 0.12);
  --btn-hover: rgba(255, 255, 255, 0.20);

  --danger-border: rgba(255, 255, 255, 0.85);
  --danger-bg: rgba(255, 255, 255, 0.12);
  --danger-fg: #ffffff;

  --focus: #ffffff;
  --focus-shadow: rgba(255, 255, 255, 0.25);
}

/* ------------------------------------------------------------
   4) Document base
   ------------------------------------------------------------ */
html, body, #app {
  height: 100%;
  width: 100%;
  margin: 0;
}

body {
  background: var(--bg);
  color: var(--fg);
  font-family: var(--font);
}

/* Make links readable by default */
a {
  color: inherit;
}

/* ------------------------------------------------------------
   5) Accessibility: focus-visible rings (global)
   ------------------------------------------------------------ */
:where(a, button, input, select, textarea, [tabindex]):focus {
  outline: none;
}

:where(a, button, input, select, textarea, [tabindex]):focus-visible {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px var(--focus-shadow);
}

/* Inputs: keep border visible on focus */
:where(input, select, textarea):focus-visible {
  border-color: var(--focus) !important;
}

/* ------------------------------------------------------------
   6) Interactions: hover/active/disabled (global)
   ------------------------------------------------------------ */
button {
  font-family: inherit;
}

button:disabled,
button[aria-disabled="true"] {
  opacity: 0.55;
  cursor: not-allowed;
}

button:active {
  transform: translateY(0.5px);
}

/* ------------------------------------------------------------
   7) Reduced motion support
   ------------------------------------------------------------ */
@media (prefers-reduced-motion: reduce) {
  :root {
    --motion: 0;
  }

  * {
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 1ms !important;
    scroll-behavior: auto !important;
  }

  button:active {
    transform: none;
  }
}

/* ------------------------------------------------------------
   8) Form controls baseline
   ------------------------------------------------------------ */
input, select, textarea {
  font-family: inherit;
}

/* ------------------------------------------------------------
   9) Scrollbar (optional; subtle)
   NOTE: This is just cosmetic and safe to remove.
   ------------------------------------------------------------ */
@media (prefers-color-scheme: dark) {
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  ::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.16);
    border-radius: 999px;
  }
  ::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.06);
  }

}

/* Native Form Controls sollen zum Theme passen */
html[data-theme="dark"] { color-scheme: dark; }
html[data-theme="light"] { color-scheme: light; }
html[data-theme="contrast"] { color-scheme: dark; }

/* Datepicker Icon sichtbar machen (Chrome/Safari/WebKit) */
html[data-theme="dark"] input[type="date"]::-webkit-calendar-picker-indicator,
html[data-theme="contrast"] input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(1) brightness(1.2);
  opacity: 0.85;
  cursor: pointer;
}

html[data-theme="light"] input[type="date"]::-webkit-calendar-picker-indicator {
  filter: none;
  opacity: 0.75;
  cursor: pointer;
}
